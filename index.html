<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>xZoom</title>
  <link type="text/css" rel="stylesheet" media="all" href="https://unpkg.com/xzoom/dist/xzoom.css" />

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<!--
<script type="text/javascript" src="jquery.panzoom.min.js"></script>
-->
<script src='panzoom.js'></script>
<script type="text/javascript">
  (function ($) {
    $(document).ready(function() {

      var element = document.querySelector('#qa')
      instance = panzoom(element, {
      });
      var rmbDown = false;
      instance.pause();
      $(document).keydown(function(event){
        if (event.keyCode == 18){ //alt
          instance.resume();
        }
      });
      $(document).keyup(function(event){
        if (event.keyCode == 18){ //alt
          instance.pause();
        }
      });
      document.addEventListener('mousedown', function(event){
       if (event.button == 2 && !rmbDown){ //RMB
        rmbDown = true;
        instance.resume();
        new_event = new MouseEvent(event.type, event)
        new_event.repeat = true;
        element.dispatchEvent(new_event);

        console.log(rmbDown)
      }
    });
      document.addEventListener('mouseup', function(event){
       if (event.button == 2){
                rmbDown = false;
        if (!event.altKey){
        instance.pause()
        }

        console.log(rmbDown)
      }
    });

    });
  })(jQuery);
</script>



<style>
  img {
    width: 200px;
  }
  body {
    background-size: 40px 40px;
    background-image:
    linear-gradient(to right, grey 1px, transparent 1px),
    linear-gradient(to bottom, grey 1px, transparent 1px);
  }
  * {
    border: 1px red solid;
  }
  #2 {
    width: auto
  }
</style>
</head>


<body style='background-color: cadetblue'>
  <div id = "qa" style="text-align:center;">
    <div id = '2'>
      <img id = '3' src="photo.webp"/>
    </div>

  </div>

</body>
</html>